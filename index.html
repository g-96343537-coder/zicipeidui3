<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>字词与图片连线游戏）</title>
<style>
  body {
    font-family: 'Microsoft YaHei', sans-serif;
    background: #f0f9ff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 {
    color: #0077b6;
  }
  .score {
    font-size: 1.2rem;
    margin-top: 10px;
    color: #0077b6;
  }
  .game-container {
    display: flex;
    justify-content: space-between;
    width: 90%;
    max-width: 800px;
    margin-top: 30px;
  }
  .words, .images {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  .word {
    width: 100px;
    height: 100px;
    line-height: 100px;
    padding: 0;
    background: #fff;
    border: 2px solid #0077b6;
    border-radius: 10px;
    text-align: center;
    cursor: grab;
    font-size: 2.5rem;
    user-select: none;
    flex-shrink: 0;
    transition: transform 0.2s, background-color 0.3s;
  }
  .word.dragging {
    opacity: 0.7;
    transform: scale(1.1);
  }
  .image-box {
    width: 100px;
    height: 100px;
    border: 2px dashed #90e0ef;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #caf0f8;
    flex-shrink: 0;
    transition: background-color 0.3s;
  }
  .image-box img {
    width: 70px;
    height: 70px;
  }
  .correct {
    background-color: #b7e4c7 !important;
    animation: flashCorrect 0.5s;
  }
  .wrong {
    background-color: #ffb3b3 !important;
  }
  @keyframes flashCorrect {
    0% { background-color: #b7e4c7; }
    50% { background-color: #ffff7f; }
    100% { background-color: #b7e4c7; }
  }
  button {
    margin-top: 25px;
    padding: 10px 25px;
    border: none;
    border-radius: 8px;
    background-color: #0077b6;
    color: #fff;
    cursor: pointer;
    font-size: 1rem;
  }
</style>
</head>
<body>
  <h1>字词与图片连线游戏</h1>
  <p>拖动左侧字卡，放到右侧相应的图片框中。</p>
  <div class="score" id="score">得分：0 / 10</div>
  <div class="game-container">
    <div class="words" id="wordList"></div>
    <div class="images" id="imageList"></div>
  </div>
  <button onclick="checkAnswers()">检查答案</button>
  <button onclick="resetGame()">重置</button>

<script>
const data = [
  {word: '跑', img: 'https://www.pinclipart.com/picdir/big/31-311858_clipart-royalty-free-download-force-friction-newtons-run.png'},
  {word: '书', img: 'https://pluspng.com/img-png/book-png-book-stack-png-image-25686-1024.png'},
  {word: '草', img: 'https://png.pngtree.com/png-clipart/20230502/original/pngtree-grass-lawn-green-plant-png-image_9132303.png'},
  {word: '笔', img: 'https://static.vecteezy.com/system/resources/previews/022/448/543/original/illustration-of-colorful-pencil-with-eraser-free-png.png'},
  {word: '门', img: 'https://pngimg.com/uploads/door/door_PNG17565.png'},
  {word: '天', img: 'https://pluspng.com/img-png/png-sky-background-blue-sky-jpg-1800.jpg'},
  {word: '树', img: 'https://www.pngplay.com/wp-content/uploads/4/Tree-Free-PNG.png'},
  {word: '手', img: 'https://static.vecteezy.com/system/resources/previews/011/888/284/original/hand-gesture-cartoon-free-png.png'},
  {word: '看', img: 'https://clipart-library.com/2023/little-boy-standing-see-using-telescope_97632-6346.jpg'},
  {word: '写', img: 'https://www.pngmart.com/files/20/Writing-PNG-Free-Download.png'}
];

let shuffled = [];
let score = 0;

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function createGame() {
  shuffled = shuffle([...data]);
  const wordList = document.getElementById('wordList');
  const imageList = document.getElementById('imageList');
  wordList.innerHTML = '';
  imageList.innerHTML = '';
  score = 0;
  updateScore();

  // 创建字卡
  shuffled.forEach(item => {
    const wordDiv = document.createElement('div');
    wordDiv.className = 'word';
    wordDiv.textContent = item.word;
    wordDiv.draggable = true;
    wordDiv.id = 'word-' + item.word;

    wordDiv.ondragstart = drag;
    wordDiv.ondragend = () => wordDiv.classList.remove('dragging');
    wordDiv.onclick = () => speakWord(item.word);

    wordList.appendChild(wordDiv);
  });

  // 创建图片框
  data.forEach(item => {
    const box = document.createElement('div');
    box.className = 'image-box';
    box.dataset.answer = item.word;
    box.innerHTML = `<img src="${item.img}" alt="${item.word}">`;
    box.ondragover = allowDrop;
    box.ondrop = drop;
    imageList.appendChild(box);
  });
}

function allowDrop(e) {
  e.preventDefault();
}

function drag(e) {
  e.target.classList.add('dragging');
  e.dataTransfer.setData('text', e.target.id);
}

function drop(e) {
  e.preventDefault();
  const dataId = e.dataTransfer.getData('text');
  const dragged = document.getElementById(dataId);

  // 找到最近的 image-box
  const box = e.target.closest('.image-box');
  if (!box) return;

  // 如果 box 已经有字卡，先移回左侧
  const existing = box.querySelector('.word');
  if (existing) {
    document.getElementById('wordList').appendChild(existing);
  }

  box.appendChild(dragged);
}

function checkAnswers() {
  const boxes = document.querySelectorAll('.image-box');
  let correctCount = 0;
  boxes.forEach(box => {
    const wordDiv = box.querySelector('.word');
    if (wordDiv) {
      if (wordDiv.textContent === box.dataset.answer) {
        box.classList.add('correct');
        box.classList.remove('wrong');
        correctCount++;
      } else {
        box.classList.add('wrong');
        box.classList.remove('correct');
      }
    } else {
      box.classList.remove('correct', 'wrong');
    }
  });
  score = correctCount;
  updateScore();
  if (correctCount === data.length) {
    alert('🎉 全部正确！太棒了！');
  }
}

function updateScore() {
  document.getElementById('score').textContent = `得分：${score} / ${data.length}`;
}

function resetGame() {
  createGame();
}

function speakWord(word) {
  const utter = new SpeechSynthesisUtterance(word);
  utter.lang = 'zh-CN';
  window.speechSynthesis.speak(utter);
}

createGame();
</script>
</body>
</html>
