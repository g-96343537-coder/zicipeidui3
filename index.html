<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>字词与图片连线游戏（进阶版）</title>
<style>
  body {
    font-family: 'Microsoft YaHei', sans-serif;
    background: #f0f9ff;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  h1 {
    color: #0077b6;
  }
  .score {
    font-size: 1.2rem;
    margin-top: 10px;
    color: #0077b6;
  }
  .game-container {
    display: flex;
    justify-content: space-around;
    width: 90%;
    max-width: 800px;
    margin-top: 30px;
  }
  .words, .images {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  .word {
    padding: 10px 15px;
    background: #fff;
    border: 2px solid #0077b6;
    border-radius: 10px;
    text-align: center;
    cursor: grab;
    font-size: 1.5rem;
  }
  .image-box {
    width: 100px;
    height: 100px;
    border: 2px dashed #90e0ef;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #caf0f8;
  }
  .image-box img {
    width: 70px;
    height: 70px;
  }
  .correct {
    background-color: #b7e4c7 !important;
  }
  .wrong {
    background-color: #ffb3b3 !important;
  }
  button {
    margin-top: 25px;
    padding: 10px 25px;
    border: none;
    border-radius: 8px;
    background-color: #0077b6;
    color: #fff;
    cursor: pointer;
    font-size: 1rem;
  }
</style>
</head>
<body>
  <h1>字词与图片连线游戏（进阶版）</h1>
  <p>拖动左侧字卡，放到右侧相应的图片框中。</p>
  <div class="score" id="score">得分：0 / 10</div>
  <div class="game-container">
    <div class="words" id="wordList"></div>
    <div class="images" id="imageList"></div>
  </div>
  <button onclick="checkAnswers()">检查答案</button>
  <button onclick="resetGame()">重置</button>

<script>
const data = [
  {word: '朋', img: 'https://cdn-icons-png.flaticon.com/512/456/456212.png'},
  {word: '友', img: 'https://cdn-icons-png.flaticon.com/512/1998/1998618.png'},
  {word: '操', img: 'https://cdn-icons-png.flaticon.com/512/3048/3048122.png'},
  {word: '跑', img: 'https://cdn-icons-png.flaticon.com/512/726/726456.png'},
  {word: '草', img: 'https://cdn-icons-png.flaticon.com/512/415/415733.png'},
  {word: '地', img: 'https://cdn-icons-png.flaticon.com/512/616/616408.png'},
  {word: '课', img: 'https://cdn-icons-png.flaticon.com/512/2921/2921822.png'},
  {word: '识', img: 'https://cdn-icons-png.flaticon.com/512/3135/3135715.png'},
  {word: '儿', img: 'https://cdn-icons-png.flaticon.com/512/1077/1077012.png'},
  {word: '歌', img: 'https://cdn-icons-png.flaticon.com/512/727/727218.png'}
];

let shuffled = [];
let score = 0;

function shuffle(arr) {
  return arr.sort(() => Math.random() - 0.5);
}

function createGame() {
  shuffled = shuffle([...data]);
  const wordList = document.getElementById('wordList');
  const imageList = document.getElementById('imageList');
  wordList.innerHTML = '';
  imageList.innerHTML = '';
  score = 0;
  updateScore();

  shuffled.forEach(item => {
    const wordDiv = document.createElement('div');
    wordDiv.className = 'word';
    wordDiv.textContent = item.word;
    wordDiv.draggable = true;
    wordDiv.id = 'word-' + item.word;
    wordDiv.ondragstart = drag;
    wordDiv.onclick = () => speakWord(item.word);
    wordList.appendChild(wordDiv);
  });

  data.forEach(item => {
    const box = document.createElement('div');
    box.className = 'image-box';
    box.dataset.answer = item.word;
    box.innerHTML = `<img src="${item.img}" alt="${item.word}">`;
    box.ondragover = allowDrop;
    box.ondrop = drop;
    imageList.appendChild(box);
  });
}

function allowDrop(e) {
  e.preventDefault();
}

function drag(e) {
  e.dataTransfer.setData('text', e.target.id);
}

function drop(e) {
  e.preventDefault();
  const dataId = e.dataTransfer.getData('text');
  const dragged = document.getElementById(dataId);
  if (!e.target.textContent.includes(dragged.textContent)) {
    e.target.appendChild(dragged);
  }
}

function checkAnswers() {
  const boxes = document.querySelectorAll('.image-box');
  let correctCount = 0;
  boxes.forEach(box => {
    const wordDiv = box.querySelector('.word');
    if (wordDiv) {
      if (wordDiv.textContent === box.dataset.answer) {
        box.classList.add('correct');
        box.classList.remove('wrong');
        correctCount++;
      } else {
        box.classList.add('wrong');
        box.classList.remove('correct');
      }
    }
  });
  score = correctCount;
  updateScore();
  if (correctCount === data.length) {
    alert('🎉 全部正确！太棒了！');
  }
}

function updateScore() {
  document.getElementById('score').textContent = `得分：${score} / ${data.length}`;
}

function resetGame() {
  createGame();
}

function speakWord(word) {
  const utter = new SpeechSynthesisUtterance(word);
  utter.lang = 'zh-CN';
  window.speechSynthesis.speak(utter);
}

createGame();
</script>
</body>
</html>